var index=function(e){"use strict";const t=e=>e.replace(/-(\w)/g,(e,t)=>t.toUpperCase());function r(e){let t=e.parentNode;t&&t.removeChild(e)}function n(e){return this._listeners[e.type](e)}function o(e,t,r,o,s){if("key"===t);else if("class"!==t||s)if("style"===t)o&&"string"!=typeof o&&"string"!=typeof r||(e.style.cssText=o||"");else if("o"===t[0]&&"n"===t[1]){let s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?r||e.addEventListener(t,n,s):e.removeEventListener(t,n,s),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!s&&t in e){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"===t||e.removeAttribute(t)}else{let r=s&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?r?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"string"==typeof o&&(r?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function s(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}const i="__okattr_";let l=0,a=!1,c=!1;function p(e,t,r){let n;if(l++||(a=null!=r&&void 0!==r.ownerSVGElement,c=null!=e&&!(i in e)),Array.isArray(t)){n=[];let o=null;Array.isArray(e)?(o=e[0].parentNode,e.forEach((e,r)=>n.push(h(e,t[r])))):t.forEach(t=>n.push(h(e,t))),r&&n.forEach(e=>r.appendChild(e))}else n=h(e,t),r&&n.parentNode!==r&&r.appendChild(n);return--l||(c=!1),n}function h(e,n){e&&e.props&&(e.props.children=n.children);let l=e,p=a;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return e&&void 0!==e.splitText&&e.parentNode?e.nodeValue!==n&&(e.nodeValue=n):(l=document.createTextNode(n),e&&(e.parentNode&&e.parentNode.replaceChild(l,e),d(e,!0))),l[i]=!0,l;let u=n.nodeName;if(a="svg"===u||"foreignObject"!==u&&a,(!e||!s(e,u))&&(l=function(e,t){let r=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return r.normalizedNodeName=e,r}(u,a),e)){for(;e.firstChild;)l.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(l,e),d(e,!0)}let f=l.firstChild,y=l[i],b=n.children;if(null==y){y=l[i]={};for(let e=l.attributes,t=e.length;t--;)y[e[t].name]=e[t].value}return!c&&b&&1===b.length&&"string"==typeof b[0]&&null!=f&&void 0!==f.splitText&&null==f.nextSibling?f.nodeValue!==b[0]&&(f.nodeValue=b[0]):(b&&b.length||null!=f)&&function(e,t,n){let o,l,a,c,p,u=e.childNodes,f=[],y={},b=0,g=0,m=u.length,v=0,x=t?t.length:0;if(0!==m)for(let e=0;e<m;e++){let t=u[e],r=t[i],o=x&&r?r.key:null;null!=o?(b++,y[o]=t):(r||(void 0!==t.splitText?!n||t.nodeValue.trim():n))&&(f[v++]=t)}if(0!==x)for(let i=0;i<x;i++){c=t[i],p=null;let d=c.key;if(null!=d)b&&void 0!==y[d]&&(p=y[d],y[d]=void 0,b--);else if(!p&&g<v)for(o=g;o<v;o++)if(void 0!==f[o]&&(O=l=f[o],j=n,"string"==typeof(w=c)||"number"==typeof w?void 0!==O.splitText:"string"==typeof w.nodeName?s(O,w.nodeName):j)){p=l,f[o]=void 0,o===v-1&&v--,o===g&&g++;break}p=h(p,c),a=u[i],p&&p!==e&&p!==a&&(null==a?e.appendChild(p):p===a.nextSibling?r(a):e.insertBefore(p,a))}var O,w,j;if(b)for(let e in y)void 0!==y[e]&&d(y[e],!1);for(;g<=v;)void 0!==(p=f[v--])&&d(p,!1)}(l,b,c),function(e,r,n){let s,i=!1,l=e.update;for(s in n)r&&null!=r[s]||null==n[s]||(o(e,s,n[s],n[s]=void 0,a),l&&(delete e.props[s],i=!0));for(s in r)l&&"object"==typeof r[s]?e.props[t(s)]!==r[s]&&(e.props[t(s)]=r[s],i=!0):"children"===s||"innerHTML"===s||s in n&&r[s]===("value"===s||"checked"===s?e[s]:n[s])||(o(e,s,n[s],n[s]=r[s],a),l&&(e.props[t(s)]=r[s],i=!0));e.parentNode&&i&&l&&e.update()}(l,n.attributes,y),l.props&&(l.props.children=n.children),a=p,l}function d(e,t){!1!==t&&null!=e[i]||r(e),function(e){e=e.lastChild;for(;e;){let t=e.previousSibling;d(e,!0),e=t}}(e)}const u=[],f=[];var y=(...e)=>{const[t,r]=e;let n,o,s,i,l=f;for(i=e.length;i-- >2;)u.push(e[i]);for(r&&null!=r.children&&(u.length||u.push(r.children),delete r.children);u.length;)if((o=u.pop())&&void 0!==o.pop)for(i=o.length;i--;)u.push(o[i]);else"boolean"==typeof o&&(o=null),(s="function"!=typeof t)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(s=!1)),s&&n?l[l.length-1]+=o:l===f?l=[o]:l.push(o),n=s;return{nodeName:t,children:l,attributes:null==r?void 0:r,key:null==r?void 0:r.key}};function b(e){return-1==e.indexOf("/")&&-1==e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function g(e,t){const r=[];let n=e.parenthoodMap.get(t);for(;n&&n.path;)r.unshift(n.path),n=e.parenthoodMap.get(n.parent);if(r.length){return"/"+r.join("/")}return""}function m(e,t){this.isProxifyingTreeNow=!1,this.isObserving=!1,this.proxifiedObjectsMap=new Map,this.parenthoodMap=new Map,"boolean"!=typeof t&&(t=!0),this.showDetachedWarning=t,this.originalObject=e,this.cachedProxy=null,this.isRecording=!1,this.userCallback,this.resume=function(){this.defaultCallback=(e=>{this.isRecording&&this.patches.push(e),this.userCallback&&this.userCallback(e)}),this.isObserving=!0}.bind(this),this.pause=function(){this.defaultCallback=(()=>{}),this.isObserving=!1}.bind(this)}m.deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},m.escapePathComponent=b,m.prototype.generateProxyAtPath=function(e,t,r){if(!t)return t;const n={set:(e,t,r,n)=>(function(e,t,r,n){const o=g(e,t)+"/"+b(r);if(e.proxifiedObjectsMap.has(n)){const o=e.proxifiedObjectsMap.get(n);e.parenthoodMap.set(o.originalObject,{parent:t,path:r})}const s=e.proxifiedObjectsMap.get(n);s&&!e.isProxifyingTreeNow&&(s.inherited=!0),n&&"object"==typeof n&&!e.proxifiedObjectsMap.has(n)&&(e.parenthoodMap.set(n,{parent:t,path:r}),n=e._proxifyObjectTreeRecursively(t,n,r));const i={op:"remove",path:o};if(void 0===n){if(!Array.isArray(t)&&!t.hasOwnProperty(r))return Reflect.set(t,r,n);{Array.isArray(t)&&(i.op="replace",i.value=null);const n=e.proxifiedObjectsMap.get(t[r]);n&&(e.parenthoodMap.delete(t[r]),e.disableTrapsForProxy(n),e.proxifiedObjectsMap.delete(n))}}else{if(Array.isArray(t)&&!Number.isInteger(+r.toString()))return"length"!=r&&console.warn("JSONPatcherProxy noticed a non-integer prop was set for an array. This will not emit a patch"),Reflect.set(t,r,n);i.op="add",t.hasOwnProperty(r)&&(void 0!==t[r]||Array.isArray(t))&&(i.op="replace"),i.value=n}const l=Reflect.set(t,r,n);return e.defaultCallback(i),l})(this,e,t,r),deleteProperty:(e,t)=>(function(e,t,r){if(void 0!==t[r]){const n=g(e,t)+"/"+b(r),o=e.proxifiedObjectsMap.get(t[r]);o&&(o.inherited?o.inherited=!1:(e.parenthoodMap.delete(o.originalObject),e.disableTrapsForProxy(o),e.proxifiedObjectsMap.delete(t[r])));const s=Reflect.deleteProperty(t,r);return e.defaultCallback({op:"remove",path:n}),s}})(this,e,t)},o=Proxy.revocable(t,n);return o.trapsInstance=n,o.originalObject=t,this.parenthoodMap.set(t,{parent:e,path:r}),this.proxifiedObjectsMap.set(o.proxy,o),o.proxy},m.prototype._proxifyObjectTreeRecursively=function(e,t,r){for(let e in t)t.hasOwnProperty(e)&&t[e]instanceof Object&&(t[e]=this._proxifyObjectTreeRecursively(t,t[e],b(e)));return this.generateProxyAtPath(e,t,r)},m.prototype.proxifyObjectTree=function(e){this.pause(),this.isProxifyingTreeNow=!0;const t=this._proxifyObjectTreeRecursively(void 0,e,"");return this.isProxifyingTreeNow=!1,this.resume(),t},m.prototype.disableTrapsForProxy=function(e){if(this.showDetachedWarning){const t="You're accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects";e.trapsInstance.set=((e,r,n)=>(console.warn(t),Reflect.set(e,r,n))),e.trapsInstance.set=((e,r,n)=>(console.warn(t),Reflect.set(e,r,n))),e.trapsInstance.deleteProperty=((e,t)=>Reflect.deleteProperty(e,t))}else delete e.trapsInstance.set,delete e.trapsInstance.get,delete e.trapsInstance.deleteProperty},m.prototype.observe=function(e,t){if(!e&&!t)throw new Error("You need to either record changes or pass a callback");return this.isRecording=e,this.userCallback=t,e&&(this.patches=[]),this.cachedProxy=this.proxifyObjectTree(this.originalObject),this.cachedProxy},m.prototype.generate=function(){if(!this.isRecording)throw new Error("You should set record to true to get patches later");return this.patches.splice(0,this.patches.length)},m.prototype.revoke=function(){this.proxifiedObjectsMap.forEach(e=>{e.revoke()})},m.prototype.disableTraps=function(){this.proxifiedObjectsMap.forEach(this.disableTrapsForProxy,this)};const v={},x={};let O=null;const w=new m({}).observe(!0,function(e){O&&clearTimeout(O);const t=e.path.slice(1);Object.entries(x).forEach(([e,r])=>{r.has(t)&&(O=setTimeout(x[e].update,16.6))})}),j=(e,t,r)=>t&&t.forEach(t=>{x[e]||(x[e]=new Set,x[e].update=r),x[e].add(t)});var N=e=>{Object.entries(e).forEach(([e,t])=>{JSON.stringify(t)!==JSON.stringify(v[e])&&(w[e]=t,v[e]=t?JSON.parse(JSON.stringify(t)):t)})};function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class P extends HTMLElement{static getHost(e){let t=e.parentNode;for(;t;){if(t.host)return t.host;t=t.parentNode}}static cloneElement(e,t,...r){return y(e.nodeName,function(e){for(var t=1;t<arguments.length;t++)if(t%2){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){C(e,t,r[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},e.attributes,{},t),r.length>0?r:e.children)}constructor(e={}){super(),this.props=e,this.data||(this.data={}),this.store=v,j(this.constructor.is,this.constructor.store,this.update.bind(this))}connectedCallback(){if(this.shadowRoot)return;this.init();const e=this.attachShadow({mode:"open"}),t=t=>{Array.isArray(t)?t.forEach(t=>e.appendChild(t)):e.appendChild(t);const r=document.getElementById("loading");r&&(r.style.display="none"),this.ready()};if(this.constructor.css){let r=document.createElement("style");const n=this.constructor.css.startsWith("<style>")&&this.constructor.css.endsWith("</style>");n?r.textContent=this.constructor.css.replace("<style>","").replace("</style>",""):((r=document.createElement("link")).setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",this.constructor.css)),e.appendChild(r),this._dom=p(null,this.render(this.props),null),n?t(this._dom):(r.addEventListener("load",o=>{if(!n){const t=o.path[1].styleSheets[0].cssRules,n=[].map.call(t,({cssText:e})=>e).join(""),s=document.createElement("style");s.textContent=n,e.appendChild(s),e.removeChild(r)}t(this._dom)}),r.addEventListener("error",()=>{console.error(`${this.constructor.is}组件样式加载失败,请检查组件样式路径！当前样式路径:"${this.constructor.css}"`),t(this._dom)}))}else this._dom=p(null,this.render(this.props),null),t(this._dom)}update(){this._dom=p(this._dom,this.render(this.props))}init(){}ready(){}fire(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t}))}}var E=e=>{e.is?customElements.define(e.is,e):(console.error('定义组件时必需提供一个组件名，格式为:"el-xxx(小写字母或数字)"'),customElements.define("el-element",e))};const T=(e,t,r,n)=>{for(let o=1;o<t.length;o++){const s=t[o++],i="number"==typeof s?r[s]:s;1===t[o]?n[0]=i:2===t[o]?(n[1]=n[1]||{})[t[++o]]=i:3===t[o]?n[1]=Object.assign(n[1]||{},i):t[o]?n.push(e.apply(null,T(e,i,r,["",null]))):n.push(i)}return n},k=function(e){let t,r,n=1,o="",s="",i=[0];const l=e=>{1===n&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(e||o,0):3===n&&(e||o)?(i.push(e||o,1),n=2):2===n&&"..."===o&&e?i.push(e,3):2===n&&o&&!e?i.push(!0,2,o):4===n&&r&&(i.push(e||o,2,r),r=""),o=""};for(let a=0;a<e.length;a++){a&&(1===n&&l(),l(a));for(let c=0;c<e[a].length;c++)t=e[a][c],1===n?"<"===t?(l(),i=[i],n=3):o+=t:s?t===s?s="":o+=t:'"'===t||"'"===t?s=t:">"===t?(l(),n=1):n&&("="===t?(n=4,r=o,o=""):"/"===t?(l(),3===n&&(i=i[0]),n=i,(i=i[0]).push(n,4),n=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(l(),n=2):o+=t)}return l(),i},M="function"==typeof Map,S=M?new Map:{},A=M?e=>{let t=S.get(e);return t||S.set(e,t=k(e)),t}:e=>{let t="";for(let r=0;r<e.length;r++)t+=e[r].length+"-"+e[r];return S[t]||(S[t]=k(e))};var _=function(e){const t=e.map(e=>e.includes("\x3c!--")?e.split("\x3c!--").map(e=>e.replace(/[\s\S]*-->/,"")).join(""):e),r=T(this,A(t),arguments,[]);return r.length>1?r:r[0]}.bind(y),R=(e,t="#r-root")=>{e.is||(e.is="el-page"),E(e),((e,t)=>{p(null,e,t="string"==typeof t?document.querySelector(t):t)})(_`<${e.is}/>`,t)};const L={version:"1.0.2",define:E,Element:P,setStore:N,html:_,page:R};return window.OK=L,e.version="1.0.2",e.define=E,e.Element=P,e.setStore=N,e.html=_,e.page=R,e}({});