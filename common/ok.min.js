!function(){"use strict";const e=e=>e.replace(/-(\w)/g,(e,t)=>t.toUpperCase()),t=e=>{let t=e.parentNode;t&&t.removeChild(e)};function n(e){return this._listeners[e.type](e)}function r(e,t,r,o,l){if("key"===t);else if("class"!==t||l)if("style"===t)o&&"string"!=typeof o&&"string"!=typeof r||(e.style.cssText=o||"");else if("o"===t[0]&&"n"===t[1]){let l=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?r||e.addEventListener(t,n,l):e.removeEventListener(t,n,l),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!l&&t in e){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"===t||e.removeAttribute(t)}else{let n=l&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"string"==typeof o&&(n?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function o(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?l(e,t.nodeName):n}function l(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}const s="__okattr_";let i=0,c=!1,p=!1;function u(e,t,n){let r;if(i++||(c=null!=n&&void 0!==n.ownerSVGElement,p=null!=e&&!(s in e)),Array.isArray(t)){r=[];let o=null;Array.isArray(e)?(o=e[0].parentNode,e.forEach((e,n)=>r.push(d(e,t[n])))):t.forEach(t=>r.push(d(e,t))),n&&r.forEach(e=>n.appendChild(e))}else r=d(e,t),n&&r.parentNode!==n&&n.appendChild(r);return--i||(p=!1),r}function d(n,i){let u;n&&n.props&&JSON.stringify(n.props.children)!==JSON.stringify(i.children)&&(u=!0),n&&n.props&&(n.props.children=i.children);let h=n,f=c;if(null!=i&&"boolean"!=typeof i||(i=""),"string"==typeof i||"number"==typeof i)return n&&void 0!==n.splitText&&n.parentNode?n.nodeValue!==i&&(n.nodeValue=i):(h=document.createTextNode(i),n&&(n.parentNode&&n.parentNode.replaceChild(h,n),a(n,!0))),h[s]=!0,h;let m=i.nodeName;if(c="svg"===m||"foreignObject"!==m&&c,(!n||!l(n,m))&&(h=function(e,t){let n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(m,c),n)){for(;n.firstChild;)h.appendChild(n.firstChild);n.parentNode&&n.parentNode.replaceChild(h,n),a(n,!0)}let y=h.firstChild,g=h[s],b=i.children;if(null==g){g=h[s]={};for(let e=h.attributes,t=e.length;t--;)g[e[t].name]=e[t].value}return!p&&b&&1===b.length&&"string"==typeof b[0]&&null!=y&&void 0!==y.splitText&&null==y.nextSibling?y.nodeValue!==b[0]&&(y.nodeValue=b[0]):(b&&b.length||null!=y)&&function(e,n,r){let l,i,c,p,u,h=e.childNodes,f=[],m={},y=0,g=0,b=h.length,v=0,w=n?n.length:0;if(0!==b)for(let e=0;e<b;e++){let t=h[e],n=t[s],o=w&&n?n.key:null;null!=o?(y++,m[o]=t):(n||(void 0!==t.splitText?!r||t.nodeValue.trim():r))&&(f[v++]=t)}if(0!==w)for(let s=0;s<w;s++){p=n[s],u=null;let a=p.key;if(null!=a)y&&void 0!==m[a]&&(u=m[a],m[a]=void 0,y--);else if(!u&&g<v)for(l=g;l<v;l++)if(void 0!==f[l]&&o(i=f[l],p,r)){u=i,f[l]=void 0,l===v-1&&v--,l===g&&g++;break}u=d(u,p),c=h[s],u&&u!==e&&u!==c&&(null==c?e.appendChild(u):u===c.nextSibling?t(c):e.insertBefore(u,c))}if(y)for(let e in m)void 0!==m[e]&&a(m[e],!1);for(;g<=v;)void 0!==(u=f[v--])&&a(u,!1)}(h,b,p),function(t,n,o){let l,s=!1,i=t.update;for(l in o)n&&null!=n[l]||null==o[l]||(r(t,l,o[l],o[l]=void 0,c),i&&(delete t.props[l],s=!0));for(l in n)i&&"object"==typeof n[l]?t.props[e(l)]!==n[l]&&(t.props[e(l)]=n[l],s=!0):"children"===l||"innerHTML"===l||l in o&&n[l]===("value"===l||"checked"===l?t[l]:o[l])||(r(t,l,o[l],o[l]=n[l],c),i&&(t.props[e(l)]=n[l],s=!0));t.parentNode&&s&&i&&t.update()}(h,i.attributes,g),h.props&&(h.props.children=i.children),c=f,u&&n.update(),h}function a(e,n){!1!==n&&null!=e[s]||t(e),function(e){e=e.lastChild;for(;e;){let t=e.previousSibling;a(e,!0),e=t}}(e)}class h extends HTMLElement{constructor(){super(),this.data={},this.props={}}connectedCallback(){if(this.shadowRoot)return;this.beforMount();const e=this.attachShadow({mode:"open"}),t=t=>{Array.isArray(t)?t.forEach(t=>e.appendChild(t)):e.appendChild(t);const n=document.getElementById("loading");n&&(n.style.display="none"),this.mounted()};if(this.constructor.css){let n=document.createElement("style");const r=this.constructor.css.startsWith("<style>")&&this.constructor.css.endsWith("</style>");r?n.textContent=this.constructor.css.replace("<style>","").replace("</style>",""):(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",this.constructor.css)),e.appendChild(n),this._dom=u(null,this.render(this.props)),r?t(this._dom):(n.addEventListener("load",o=>{if(!r){let t;t=o.srcElement?o.srcElement.sheet.cssRules:o.composedPath()[1].styleSheets[0].cssRules;const r=document.createElement("style");r.textContent=[].map.call(t,({cssText:e})=>e).join(""),e.appendChild(r),e.removeChild(n)}t(this._dom)}),n.addEventListener("error",()=>{console.error(`${this.constructor.is}组件样式加载失败,请检查组件样式路径！当前样式路径:"${this.constructor.css}"`),t(this._dom)}))}else this._dom=u(null,this.render(this.props)),t(this._dom)}disconnectedCallback(){this.remove()}update(){const e=JSON.stringify(this.data),t=JSON.stringify(this.props);this.oldData===e&&this.oldProps===t||(this._dom=u(this._dom,this.render(this.props)),this.oldData=e,this.oldProps=t)}beforMount(){}mounted(){}remove(){}emit(e,t){this.dispatchEvent(new CustomEvent(e.toLowerCase(),{detail:t}))}}var f=e=>{e.is?customElements.define(e.is,e):(console.error('请为类定义is静态属性做为元素标签名，格式为:"el-xxx(小写字母或数字)"'),customElements.define("el-element",e))};const m=[],y=[];var g=(...e)=>{const[t,n]=e;let r,o,l,s,i=y;for(s=e.length;s-- >2;)m.push(e[s]);for(n&&null!=n.children&&(m.length||m.push(n.children),delete n.children);m.length;)if((o=m.pop())&&void 0!==o.pop)for(s=o.length;s--;)m.push(o[s]);else"boolean"==typeof o&&(o=null),(l="function"!=typeof t)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(l=!1)),l&&r?i[i.length-1]+=o:i===y?i=[o]:i.push(o),r=l;return{nodeName:t,children:i,attributes:null==n?void 0:n,key:null==n?void 0:n.key}};const b="function"==typeof Map,v=b?new Map:{},w=(e,t,n,r)=>{for(let o=1;o<t.length;o++){const l=t[o++],s="number"==typeof l?n[l]:l;1===t[o]?r[0]=s:2===t[o]?(r[1]=r[1]||{})[t[++o]]=s:3===t[o]?r[1]=Object.assign(r[1]||{},s):t[o]?r.push(e.apply(null,w(e,s,n,["",null]))):r.push(s)}return r},N=function(e){let t,n,r=1,o="",l="",s=[0];const i=e=>{1===r&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(e||o,0):3===r&&(e||o)?(s.push(e||o,1),r=2):2===r&&"..."===o&&e?s.push(e,3):2===r&&o&&!e?s.push(!0,2,o):4===r&&n&&(s.push(e||o,2,n),n=""),o=""};for(let c=0;c<e.length;c++){c&&(1===r&&i(),i(c));for(let p=0;p<e[c].length;p++)t=e[c][p],1===r?"<"===t?(i(),s=[s],r=3):o+=t:l?t===l?l="":o+=t:'"'===t||"'"===t?l=t:">"===t?(i(),r=1):r&&("="===t?(r=4,n=o,o=""):"/"===t?(i(),3===r&&(s=s[0]),r=s,(s=s[0]).push(r,4),r=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(i(),r=2):o+=t)}return i(),s},C=e=>e.map(e=>{if(e.includes("\x3c!--")){return e.split("\x3c!--").map(e=>e.replace(/[\s\S]*-->/,"")).join("")}return e}),E=b?e=>{let t=v.get(e);return t||v.set(e,t=N(C(e))),t}:e=>{let t="";for(let n=0;n<e.length;n++)t+=e[n].length+"-"+e[n];return v[t]||(v[t]=N(C(e)))};var O=(...e)=>{const[t]=e,n=w(g,E(t),e,[]);return n.length>1?n:n[0]};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.OK={version:"0.1.0",define:f,Element:h,html:O,page:(e,t="r-root",n="loading")=>{e.is||(e.is="el-page"),f(e),((e,t)=>{u(null,e,t="string"==typeof t?document.getElementById(t):t)})(O`<${e.is}/>`,t)},getHost:e=>{let t=e.parentNode;for(;t;){if(t.host)return t.host;t=t.parentNode}},cloneElement:(e,t,...n)=>g(e.nodeName,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.attributes,{},t),n.length>0?n:e.children)}}();